<ng-container *ngIf="isLoggedIn; else loginTpl">

  <div class="flex flex-col min-h-screen">

    <!-- HEADER -->
    <header class="flex items-center justify-between bg-gray-800 px-6 py-3 shadow-lg">
      <div class="text-white font-bold text-xl">CRM</div>

      <div class="flex items-center">
        <input type="text" placeholder="Buscar clientes..." class="px-3 py-1 rounded-l bg-gray-700 text-white focus:outline-none">
        <button class="px-3 py-1 bg-gray-600 rounded-r hover:bg-gray-500 transition">Buscar</button>

        <button class="mx-2 p-2 rounded-full hover:bg-gray-700 transition">
          <img src="campana.svg" alt="Notificaciones" class="w-6 h-6">
        </button>

        <button class="mx-2 p-2 rounded-full hover:bg-gray-700 transition">
          <img src="usuario.svg" alt="Usuario" class="w-6 h-6">
        </button>
      </div>
    </header>

    <div class="flex flex-1">
      <aside class="flex flex-col w-64 bg-gray-900 text-white p-4 gap-3 shadow-lg">
        <div class="flex flex-col gap-3">
          <a routerLink="/inicio" routerLinkActive="bg-gray-700" class="px-3 py-2 rounded hover:bg-gray-700 transition">Dashboard</a>
          <a routerLink="/clientes" routerLinkActive="bg-gray-700" class="px-3 py-2 rounded hover:bg-gray-700 transition">Clientes</a>
          <a routerLink="/contactos" routerLinkActive="bg-gray-700" class="px-3 py-2 rounded hover:bg-gray-700 transition">Contactos</a>
          <a routerLink="/oportunidades" routerLinkActive="bg-gray-700" class="px-3 py-2 rounded hover:bg-gray-700 transition">Oportunidades</a>
          <a routerLink="/tareas" routerLinkActive="bg-gray-700" class="px-3 py-2 rounded hover:bg-gray-700 transition">Tareas</a>

          <div class="border-t border-gray-600 my-2"></div>
          <button class="px-3 py-2 bg-red-600 rounded hover:bg-red-700 transition" (click)="logout()">Cerrar sesión</button>
        </div>
      </aside>

      <main class="flex-1 p-6 bg-gray-100">
        <router-outlet></router-outlet>
      </main>
    </div>
  </div>

</ng-container>

<ng-template #loginTpl>
  <app-login (loginSuccess)="handleLogin()"></app-login>
</ng-template>

<!-- DEBUG: mostrar estado de sesión (opcional; eliminar en producción) -->
<div style="position:fixed;right:8px;top:8px;background:#fff;padding:6px;border:1px solid #ccc;z-index:9999;">
  isLoggedIn: {{ isLoggedIn }}
</div>
