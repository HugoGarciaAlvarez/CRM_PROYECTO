<div class="p-4 sm:p-6 bg-gray-100 min-h-screen flex flex-col gap-4 page-content-container">

  <!-- Bienvenida -->
  <h1 class="text-2xl sm:text-3xl font-bold mb-2" *ngIf="!cargando()">
    Bienvenido {{ nombre() }}
  </h1>

  <!-- Resumen en tarjetas -->
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4" *ngIf="!cargando()">
    <div class="bg-blue-100 text-blue-700 p-4 sm:p-5 rounded-lg shadow text-center">
      <h2 class="font-medium text-sm sm:text-base mb-1">Tareas Faltantes</h2>
      <p class="text-2xl sm:text-3xl font-bold">{{ tareasFaltantes() }}</p>
    </div>
    <div class="bg-orange-100 text-orange-700 p-4 sm:p-5 rounded-lg shadow text-center">
      <h2 class="font-medium text-sm sm:text-base mb-1">Incidencias en Trámite</h2>
      <p class="text-2xl sm:text-3xl font-bold">{{ incidenciasTramite() }}</p>
    </div>
    <div class="bg-red-100 text-red-700 p-4 sm:p-5 rounded-lg shadow text-center">
      <h2 class="font-medium text-sm sm:text-base mb-1">Incidencias Activas</h2>
      <p class="text-2xl sm:text-3xl font-bold">{{ incidenciasActivas() }}</p>
    </div>
  </div>

  <!-- Gráficas alineadas -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4" *ngIf="!cargando()">

  <!-- Ventas Mensuales -->
  <div class="bg-white p-4 sm:p-6 rounded-lg shadow flex flex-col items-stretch">
    <h2 class="font-medium mb-2">Ventas Mensuales</h2>
    <div class="w-full h-48 sm:h-64">
      <canvas #ventasCanvas class="w-full h-full"></canvas>
    </div>
  </div>

  <!-- Leads por Estado -->
  <div class="bg-white p-4 sm:p-6 rounded-lg shadow flex flex-col items-stretch">
    <h2 class="font-medium mb-2">Leads por Estado</h2>
    <div class="w-full h-48 sm:h-64 flex items-center justify-center">
      <canvas #leadsCanvas class="w-48 sm:w-full h-40 sm:h-full"></canvas>
    </div>
  </div>

</div>

  <!-- Tabla de clientes recientes -->
  <div class="bg-white p-4 sm:p-6 rounded-lg shadow mt-4" *ngIf="!cargando()">
    <h2 class="font-medium mb-3">Clientes Recientes</h2>
    <!-- Table becomes card-like on small screens -->
    <div class="hidden sm:block">
      <table class="min-w-full text-left border-collapse table-fixed">
        <thead>
          <tr class="bg-gray-200">
            <th class="px-3 py-2 w-1/2">Nombre</th>
            <th class="px-3 py-2 w-1/6">Estado</th>
            <th class="px-3 py-2 w-1/3">Último contacto</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let cliente of clientesRecientes()" class="align-top">
            <td class="border-t px-3 py-2">{{ cliente.nombre }}</td>
            <td class="border-t px-3 py-2">{{ cliente.estado }}</td>
            <td class="border-t px-3 py-2">{{ cliente.ultimoContacto }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="sm:hidden space-y-3">
      <div *ngFor="let cliente of clientesRecientes()" class="border rounded-lg p-3">
        <div class="text-sm text-gray-500">Nombre</div>
        <div class="font-medium">{{ cliente.nombre }}</div>
        <div class="mt-2 text-sm text-gray-500">Estado</div>
        <div class="text-sm">{{ cliente.estado }}</div>
        <div class="mt-2 text-sm text-gray-500">Último contacto</div>
        <div class="text-sm">{{ cliente.ultimoContacto }}</div>
      </div>
    </div>
  </div>

  <!-- Loading -->
  <p class="text-gray-500 text-xl" *ngIf="cargando()">Cargando dashboard...</p>

</div>
